---
import BaseLayout from "../../layouts/BaseLayout.astro";
import { getCollection } from "astro:content";

// Fetch posts from the content collection
const allPosts = await getCollection("posts");

// Sort ascending by pubDate (oldest â†’ newest)
allPosts.sort((a, b) => a.data.pubDate.getTime() - b.data.pubDate.getTime());
---

<BaseLayout title="Math">
  <section class="w-full py-10 lg:py-16">
    <div class="w-full lg:max-w-[1170px] mx-auto px-5">

      <!-- Posts -->
      <ul class="space-y-6 lg:space-y-7">
        {
          allPosts.length > 0 ? (
            allPosts.map((post) => (
              <li>
                <h2 class="text-lg font-bold text-[#333333] font-open-sans mb-1">
                  <a href={`/math/${post.slug}`}>{post.data.title}</a>
                </h2>
                <p class="text-[#929292] text-sm font-open-sans mb-4 line-clamp-5">
                  {post.data.description}
                </p>
                <a
                  href={`/math/${post.slug}`}
                  class="text-sm inline-block font-open-sans font-semibold bg-[#000f51] hover:bg-transparent transition-colors ease-in-out duration-300 border border-[#000f51] px-4 py-2 text-white hover:text-[#333333]/80"
                >
                  Read More
                </a>
              </li>
            ))
          ) : (
            <li>No posts found.</li>
          )
        }
      </ul>

      <h3 class="text-lg font-roboto lg:text-xl font-semibold text-[#6ec1e4] mt-6 lg:mt-7">
        More to come soon!
      </h3>
    </div>
  </section>
</BaseLayout>
